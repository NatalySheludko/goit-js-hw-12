{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createImgGallery(images) {\n  return images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n\t\t\t}) => `<li class=\"gallery-item\">\t\t\t\n\t\t\t<div class=\"img-wrap\">\n\t\t\t<a class=\"img-link\" href=\"${largeImageURL}\">\n\t\t\t<img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n\t\t\t</a></div>\t\t\t\n\t\t\t<ul class=\"data-wrapper\">\n\t\t\t\t<li class=\"wrap-item\">\n\t\t\t\t\t<p class=\"wrap-title\">Likes</p>\n\t\t\t\t\t<span class=\"wrap-text\">${likes}</span> </li>\n\t\t\t\t<li class=\"wrap-item\">\n\t\t\t\t\t<p class=\"wrap-title\">Views</p>\n\t\t\t\t\t<span class=\"wrap-text\">${views}</span> </li>\n\t\t\t\t<li class=\"wrap-item\">\n\t\t\t\t\t<p class=\"wrap-title\">Comments</p>\n\t\t\t\t\t<span class=\"wrap-text\">${comments}</span> </li>\n\t\t\t\t<li class=\"wrap-item\">\n\t\t\t\t\t<p class=\"wrap-title\">Downloads</p>\n\t\t\t\t\t<span class=\"wrap-text\">${downloads}</span> </li>\t\t\t\t\n\t\t\t</ul>\n\t\t\t</li>`\n    )\n    .join(\"\");\n}\n","import axios from \"axios\";\n\nexport const perPage = 15;\n\nexport async function getImgGallery(images, page) {\n  try {\n    const res = await axios.get(\"https://pixabay.com/api/\", {\n      params: {\n        key: \"42911891-070dc2b99870cce1062cd0bc6\",\n        q: images,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: perPage,\n        page,\n      },\n    });\n    return res.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { createImgGallery } from \"./js/render-functions\";\nimport { getImgGallery } from \"./js/pixabay-api\";\nimport { perPage } from \"./js/pixabay-api\";\n\nconst refs = {\n  imgGalleryForm: document.querySelector(\".gallery-form\"),\n  galleryContainer: document.querySelector(\".gallery\"),\n  loadMoreBtn: document.querySelector(\"#load-more\"),\n  loader: document.querySelector(\".loader\"),\n};\n\nlet page = 1;\nlet images;\nlet totalPages = 0;\nlet gallery = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nrefs.imgGalleryForm.addEventListener(\"submit\", onHandleSubmit);\nrefs.loadMoreBtn.addEventListener(\"click\", onLoadMoreClick);\nhiddenLoading();\n\nasync function onHandleSubmit(e) {\n  e.preventDefault();\n\n  images = e.target.elements.imgName.value.trim();\n\n  refs.galleryContainer.innerHTML = \"\";\n  page = 1;\n\n  if (!images) {\n    showDataStatusError();\n    return;\n  }\n\n  try {\n    showLoading();\n    hiddenLoadMoreBtn();\n    const data = await getImgGallery(images, page);\n    totalPages = Math.ceil(data.totalHits / perPage);\n\n    if (data.hits.length === 0) {\n      showDataStatusError();\n      e.target.reset();\n      return;\n    }\n\n    const markupGallery = createImgGallery(data.hits);\n    refs.galleryContainer.insertAdjacentHTML(\"beforeend\", markupGallery);\n    gallery.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n\n  hiddenLoading();\n  checkLoadBtnStatus();\n  e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  showLoading();\n  try {\n    const data = await getImgGallery(images, page);\n    const markupGallery = createImgGallery(data.hits);\n    refs.galleryContainer.insertAdjacentHTML(\"beforeend\", markupGallery);\n    gallery.refresh();\n    displayScroll();\n  } catch (error) {\n    console.log(error);\n  }\n\n  hiddenLoading();\n  checkLoadBtnStatus();\n}\n\nfunction showDataStatusError() {\n  hiddenLoadMoreBtn();\n  iziToast.error({\n    position: \"topRight\",\n    backgroundColor: \"#e4a5ac\",\n    close: true,\n    messageColor: \"#774144\",\n    message:\n      \"❗Sorry, there are no images matching your search query. Please try again!\",\n  });\n  hiddenLoading();\n}\n\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove(\"visually-hidden\");\n}\n\nfunction hiddenLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add(\"visually-hidden\");\n}\n\nfunction showLoading() {\n  refs.loader.style.display = \"block\";\n}\n\nfunction hiddenLoading() {\n  refs.loader.style.display = \"none\";\n}\n\nfunction checkLoadBtnStatus() {\n  if (page >= totalPages) {\n    hiddenLoadMoreBtn();\n    iziToast.error({\n      position: \"topRight\",\n      backgroundColor: \"#e4a5ac\",\n      close: true,\n      messageColor: \"#774144\",\n      message: \"❗We're sorry, but you've reached the end of search results.\",\n    });\n    refs.loadMoreBtn.classList.add(\"visually-hidden\");\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction displayScroll() {\n  const height =\n    refs.galleryContainer.firstChild.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 2,\n    behavior: \"smooth\",\n  });\n}\n"],"names":["createImgGallery","images","largeImageURL","webformatURL","tags","likes","views","comments","downloads","perPage","getImgGallery","page","axios","error","refs","totalPages","gallery","SimpleLightbox","onHandleSubmit","onLoadMoreClick","hiddenLoading","e","showDataStatusError","showLoading","hiddenLoadMoreBtn","data","markupGallery","checkLoadBtnStatus","displayScroll","iziToast","showLoadMoreBtn","height"],"mappings":"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"}